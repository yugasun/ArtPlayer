{"version":3,"file":"artplayer-plugin-danmuku.js","sources":["../../node_modules/_@babel_runtime@7.16.3@@babel/runtime/helpers/esm/defineProperty.js","../../node_modules/_@babel_runtime@7.16.3@@babel/runtime/helpers/esm/classCallCheck.js","../../node_modules/_@babel_runtime@7.16.3@@babel/runtime/helpers/esm/createClass.js","../../packages/artplayer-plugin-danmuku/src/i18n.js","../../packages/artplayer-plugin-danmuku/src/utils.js","../../node_modules/_@babel_runtime@7.16.3@@babel/runtime/helpers/esm/arrayWithHoles.js","../../node_modules/_@babel_runtime@7.16.3@@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../node_modules/_@babel_runtime@7.16.3@@babel/runtime/helpers/esm/arrayLikeToArray.js","../../node_modules/_@babel_runtime@7.16.3@@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../node_modules/_@babel_runtime@7.16.3@@babel/runtime/helpers/esm/nonIterableRest.js","../../node_modules/_@babel_runtime@7.16.3@@babel/runtime/helpers/esm/slicedToArray.js","../../packages/artplayer-plugin-danmuku/src/bilibili.js","../../packages/artplayer-plugin-danmuku/src/getDanmuTop.js","../../packages/artplayer-plugin-danmuku/src/danmuku.js","../../packages/artplayer-plugin-danmuku/src/index.js"],"sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default {\n    'zh-cn': {\n        'Danmu opacity': '弹幕透明度',\n        'Danmu speed': '弹幕速度',\n        'Danmu size': '弹幕大小',\n        'Danmu text cannot be empty': '弹幕文本不能为空',\n        'The length of the danmu does not exceed': '弹幕文本字数不能超过',\n        'Danmu speed synchronous playback multiple': '弹幕速度同步播放倍数',\n    },\n    'zh-tw': {\n        'Danmu opacity': '彈幕透明度',\n        'Danmu speed': '彈幕速度',\n        'Danmu size': '弹幕大小',\n        'Danmu text cannot be empty': '彈幕文本不能為空',\n        'The length of the danmu does not exceed': '彈幕文本字數不能超過',\n        'Danmu speed synchronous playback multiple': '彈幕速度同步播放倍數',\n    },\n};","export function filter(queue, state, callback) {\n    return queue.filter(danmu => danmu.$state === state).map(callback);\n}\n\nexport function getRect(ref, key) {\n    const result = ref.getBoundingClientRect();\n    return key ? result[key] : result;\n}\n\nexport function getDanmuRef(queue) {\n    const result = queue.find(danmu => {\n        return danmu.$ref && danmu.$state === 'wait';\n    });\n\n    if (result) {\n        const { $ref } = result;\n        result.$ref = null;\n        return $ref;\n    }\n\n    const $ref = document.createElement('div');\n    $ref.style.cssText = `\n        user-select: none;\n        position: absolute;\n        white-space: pre;\n        pointer-events: none;\n        perspective: 500px;\n        display: inline-block;\n        will-change: transform;\n        font-family: SimHei, \"Microsoft JhengHei\", Arial, Helvetica, sans-serif;\n        font-weight: normal;\n        line-height: 1.125;\n        text-shadow: rgb(0, 0, 0) 1px 0px 1px, rgb(0, 0, 0) 0px 1px 1px, rgb(0, 0, 0) 0px -1px 1px, rgb(0, 0, 0) -1px 0px 1px;\n    `;\n\n    return $ref;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export function getMode(key) {\n    switch (key) {\n        case 1:\n        case 2:\n        case 3:\n            return 0;\n        case 4:\n        case 5:\n            return 1;\n        default:\n            return 0;\n    }\n}\n\nexport function bilibiliDanmuParseFromXml(xmlString) {\n    if (typeof xmlString !== 'string') return [];\n    const srtList = xmlString.match(/<d([\\S ]*?>[\\S ]*?)<\\/d>/gi);\n    return srtList && srtList.length\n        ? srtList.map((item) => {\n              const [, attrStr, text] = item.match(/<d p=\"(.+)\">(.+)<\\/d>/);\n              const attr = attrStr.split(',');\n              return attr.length === 8 && text.trim()\n                  ? {\n                        text,\n                        time: Number(attr[0]),\n                        mode: getMode(Number(attr[1])),\n                        fontSize: Number(attr[2]),\n                        color: `#${Number(attr[3]).toString(16)}`,\n                        timestamp: Number(attr[4]),\n                        pool: Number(attr[5]),\n                        userID: attr[6],\n                        rowID: Number(attr[7]),\n                    }\n                  : null;\n          })\n        : [];\n}\n\nexport function bilibiliDanmuParseFromUrl(url) {\n    return fetch(url)\n        .then((res) => res.text())\n        .then((xmlString) => bilibiliDanmuParseFromXml(xmlString));\n}\n","import { getRect } from './utils';\n\nfunction calculatedTop(danmus) {\n    let top = 0;\n    const topMap = {};\n    for (let index = 0; index < danmus.length; index += 1) {\n        const item = danmus[index];\n        if (topMap[item.top]) {\n            topMap[item.top].push(item);\n        } else {\n            topMap[item.top] = [item];\n        }\n    }\n    const topMapKeys = Object.keys(topMap);\n\n    let maxDiff = 0;\n    for (let index = 1; index < danmus.length; index += 1) {\n        const item = danmus[index];\n        const prev = danmus[index - 1];\n        const prevTop = prev.top + prev.height;\n        const diff = item.top - prevTop;\n        if (diff > maxDiff) {\n            top = prevTop;\n            maxDiff = diff;\n        }\n    }\n\n    if (top === 0) {\n        let maxRight = 0;\n        for (let index = 0; index < topMapKeys.length; index += 1) {\n            let minRight = danmus[0].width;\n            const topKey = topMapKeys[index];\n            const danmuArr = topMap[topKey];\n            for (let index = 0; index < danmuArr.length; index += 1) {\n                const danmu = danmuArr[index];\n                if (danmu.right < minRight) {\n                    minRight = danmu.right;\n                }\n            }\n\n            if (minRight > maxRight) {\n                maxRight = minRight;\n                [{ top }] = danmuArr;\n            }\n        }\n    }\n\n    if (top === 0) {\n        [top] = topMapKeys\n            .filter((item, index) => {\n                return index !== 0 && index !== topMapKeys.length - 1;\n            })\n            .sort((prev, next) => {\n                return topMap[prev].length - topMap[next].length;\n            });\n    }\n\n    return top;\n}\n\nexport default function getDanmuTop(ins, danmu) {\n    const [marginTop, marginBottom] = ins.option.margin;\n    const playerData = getRect(ins.art.template.$player);\n    const danmus = ins.queue\n        .filter(\n            item =>\n                item.mode === danmu.mode &&\n                item.$state === 'emit' &&\n                item.$ref &&\n                item.$ref.style.fontSize === danmu.$ref.style.fontSize &&\n                parseFloat(item.$ref.style.top) <= playerData.height - marginBottom,\n        )\n        .map(item => {\n            const danmuData = getRect(item.$ref);\n            const { width, height } = danmuData;\n            const top = danmuData.top - playerData.top;\n            const left = danmuData.left - playerData.left;\n            const right = playerData.width - left - width;\n            return { top, left, height, width, right };\n        })\n        .sort((prev, next) => prev.top - next.top);\n\n    if (danmus.length === 0) {\n        return marginTop;\n    }\n\n    danmus.unshift({\n        top: 0,\n        left: 0,\n        right: 0,\n        height: marginTop,\n        width: playerData.width,\n    });\n\n    danmus.push({\n        top: playerData.height - marginBottom,\n        left: 0,\n        right: 0,\n        height: marginBottom,\n        width: playerData.width,\n    });\n\n    return calculatedTop(danmus);\n}\n","import i18n from './i18n';\nimport { filter, getRect, getDanmuRef } from './utils';\nimport { bilibiliDanmuParseFromUrl } from './bilibili';\nimport getDanmuTop from './getDanmuTop';\n\nexport default class Danmuku {\n    constructor(art, option) {\n        art.i18n.update(i18n);\n        this.art = art;\n        this.queue = [];\n        this.option = {};\n        this.config(option);\n        this.isStop = false;\n        this.isHide = false;\n        this.animationFrameTimer = null;\n        this.$danmuku = art.template.$danmuku;\n        art.on('video:play', this.start.bind(this));\n        art.on('video:playing', this.start.bind(this));\n        art.on('video:pause', this.stop.bind(this));\n        art.on('video:waiting', this.stop.bind(this));\n        art.on('resize', this.resize.bind(this));\n        art.on('destroy', this.stop.bind(this));\n        this.load();\n    }\n\n    static get option() {\n        return {\n            danmuku: [],\n            speed: 5,\n            maxlength: 50,\n            margin: [10, 100],\n            opacity: 1,\n            fontSize: 25,\n            synchronousPlayback: false,\n        };\n    }\n\n    static get scheme() {\n        return {\n            danmuku: 'array|function|string',\n            speed: 'number',\n            maxlength: 'number',\n            margin: 'array',\n            opacity: 'number',\n            fontSize: 'number',\n            synchronousPlayback: 'boolean',\n        };\n    }\n\n    load() {\n        if (typeof this.option.danmuku === 'function') {\n            this.option.danmuku().then((danmus) => {\n                this.queue = [];\n                this.$danmuku.innerText = '';\n                danmus.forEach(this.emit.bind(this));\n                this.art.emit('artplayerPluginDanmuku:loaded');\n            });\n        } else if (typeof this.option.danmuku === 'string') {\n            bilibiliDanmuParseFromUrl(this.option.danmuku).then((danmus) => {\n                this.queue = [];\n                this.$danmuku.innerText = '';\n                danmus.forEach(this.emit.bind(this));\n                this.art.emit('artplayerPluginDanmuku:loaded');\n            });\n        } else {\n            this.queue = [];\n            this.$danmuku.innerText = '';\n            this.option.danmuku.forEach(this.emit.bind(this));\n            this.art.emit('artplayerPluginDanmuku:loaded');\n        }\n        return this;\n    }\n\n    config(option) {\n        const {\n            utils: { clamp },\n            validator,\n        } = this.art.constructor;\n        this.option = Object.assign({}, Danmuku.option, this.option, option);\n        validator(this.option, Danmuku.scheme);\n        this.option.speed = clamp(this.option.speed, 1, 10);\n        this.option.maxlength = clamp(this.option.maxlength, 10, 100);\n        this.option.margin[0] = clamp(this.option.margin[0], 0, 100);\n        this.option.margin[1] = clamp(this.option.margin[1], 0, 100);\n        this.option.opacity = clamp(this.option.opacity, 0, 1);\n        this.option.fontSize = clamp(this.option.fontSize, 12, 30);\n        this.art.emit('artplayerPluginDanmuku:config', this.option);\n        return this;\n    }\n\n    continue() {\n        filter(this.queue, 'stop', (danmu) => {\n            danmu.$state = 'emit';\n            danmu.$lastStartTime = Date.now();\n            switch (danmu.mode) {\n                case 0:\n                    danmu.$ref.style.transform = `translateX(${-danmu.$restWidth}px) translateY(0px) translateZ(0px)`;\n                    danmu.$ref.style.transition = `transform ${danmu.$restTime}s linear 0s`;\n                    break;\n                default:\n                    break;\n            }\n        });\n        return this;\n    }\n\n    suspend() {\n        const { $player } = this.art.template;\n        filter(this.queue, 'emit', (danmu) => {\n            danmu.$state = 'stop';\n            switch (danmu.mode) {\n                case 0: {\n                    const { left: playerLeft, width: playerWidth } = getRect($player);\n                    const { left: danmuLeft } = getRect(danmu.$ref);\n                    const translateX = playerWidth - (danmuLeft - playerLeft) + 5;\n                    danmu.$ref.style.transform = `translateX(${-translateX}px) translateY(0px) translateZ(0px)`;\n                    danmu.$ref.style.transition = 'transform 0s linear 0s';\n                    break;\n                }\n                default:\n                    break;\n            }\n        });\n        return this;\n    }\n\n    resize() {\n        const { $player } = this.art.template;\n        const danmuLeft = getRect($player, 'width');\n        filter(this.queue, 'wait', (danmu) => {\n            if (danmu.$ref) {\n                danmu.$ref.style.border = 'none';\n                danmu.$ref.style.left = `${danmuLeft}px`;\n                danmu.$ref.style.marginLeft = '0px';\n                danmu.$ref.style.transform = 'translateX(0px) translateY(0px) translateZ(0px)';\n                danmu.$ref.style.transition = 'transform 0s linear 0s';\n            }\n        });\n        return this;\n    }\n\n    update() {\n        const { $player } = this.art.template;\n        this.animationFrameTimer = window.requestAnimationFrame(() => {\n            if (this.art.playing && !this.isHide) {\n                const danmuLeft = getRect($player, 'width');\n\n                filter(this.queue, 'emit', (danmu) => {\n                    danmu.$restTime -= (Date.now() - danmu.$lastStartTime) / 1000;\n                    danmu.$lastStartTime = Date.now();\n                    if (danmu.$restTime <= 0) {\n                        danmu.$state = 'wait';\n                        danmu.$ref.style.border = 'none';\n                        danmu.$ref.style.left = `${danmuLeft}px`;\n                        danmu.$ref.style.marginLeft = '0px';\n                        danmu.$ref.style.transform = 'translateX(0px) translateY(0px) translateZ(0px)';\n                        danmu.$ref.style.transition = 'transform 0s linear 0s';\n                    }\n                });\n\n                this.queue\n                    .filter(\n                        (danmu) =>\n                            this.art.currentTime + 0.1 >= danmu.time &&\n                            danmu.time >= this.art.currentTime - 0.1 &&\n                            danmu.$state === 'wait',\n                    )\n                    .forEach((danmu) => {\n                        danmu.$ref = getDanmuRef(this.queue);\n                        this.$danmuku.appendChild(danmu.$ref);\n                        danmu.$ref.style.opacity = this.option.opacity;\n                        danmu.$ref.style.fontSize = `${this.option.fontSize}px`;\n                        danmu.$ref.innerText = danmu.text;\n                        danmu.$ref.style.color = danmu.color || '#fff';\n                        danmu.$ref.style.border = danmu.border ? `1px solid ${danmu.color || '#fff'}` : 'none';\n                        danmu.$restTime =\n                            this.option.synchronousPlayback && this.art.playbackRate\n                                ? this.option.speed / Number(this.art.playbackRate)\n                                : this.option.speed;\n                        danmu.$lastStartTime = Date.now();\n                        const danmuWidth = getRect(danmu.$ref, 'width');\n                        const danmuTop = getDanmuTop(this, danmu);\n                        danmu.$state = 'emit';\n                        switch (danmu.mode) {\n                            case 0: {\n                                danmu.$restWidth = danmuLeft + danmuWidth + 5;\n                                danmu.$ref.style.left = `${danmuLeft}px`;\n                                danmu.$ref.style.top = `${danmuTop}px`;\n                                danmu.$ref.style.transform = `translateX(${-danmu.$restWidth}px) translateY(0px) translateZ(0px)`;\n                                danmu.$ref.style.transition = `transform ${danmu.$restTime}s linear 0s`;\n                                break;\n                            }\n                            case 1:\n                                danmu.$ref.style.top = `${danmuTop}px`;\n                                danmu.$ref.style.left = '50%';\n                                danmu.$ref.style.marginLeft = `-${danmuWidth / 2}px`;\n                                break;\n                            default:\n                                break;\n                        }\n                    });\n            }\n\n            if (!this.isStop) {\n                this.update();\n            }\n        });\n        return this;\n    }\n\n    stop() {\n        this.isStop = true;\n        this.suspend();\n        window.cancelAnimationFrame(this.animationFrameTimer);\n        this.art.emit('artplayerPluginDanmuku:stop');\n        return this;\n    }\n\n    start() {\n        this.isStop = false;\n        this.continue();\n        this.update();\n        this.art.emit('artplayerPluginDanmuku:start');\n        return this;\n    }\n\n    show() {\n        this.isHide = false;\n        this.$danmuku.style.display = 'block';\n        this.art.emit('artplayerPluginDanmuku:show');\n        return this;\n    }\n\n    hide() {\n        this.isHide = true;\n        this.$danmuku.style.display = 'none';\n        this.art.emit('artplayerPluginDanmuku:hide');\n        return this;\n    }\n\n    emit(danmu) {\n        const { notice, i18n } = this.art;\n\n        const {\n            utils: { clamp },\n            validator,\n        } = this.art.constructor;\n\n        validator(danmu, {\n            text: 'string',\n            mode: 'number|undefined',\n            color: 'string|undefined',\n            time: 'number|undefined',\n            border: 'boolean|undefined',\n        });\n\n        if (!danmu.text.trim()) {\n            notice.show = i18n.get('Danmu text cannot be empty');\n            return this;\n        }\n\n        if (danmu.text.length > this.option.maxlength) {\n            notice.show = `${i18n.get('The length of the danmu does not exceed')} ${this.option.maxlength}`;\n            return this;\n        }\n\n        if (danmu.time) {\n            danmu.time = clamp(danmu.time, 0, Infinity);\n        } else {\n            danmu.time = this.art.currentTime + 0.5;\n        }\n\n        this.queue.push({\n            mode: 0,\n            ...danmu,\n            $state: 'wait',\n            $ref: null,\n            $restTime: 0,\n            $lastStartTime: 0,\n            $restWidth: 0,\n        });\n        return this;\n    }\n}\n","import Danmuku from './danmuku';\n\nexport default function artplayerPluginDanmuku(option) {\n    return (art) => {\n        const danmuku = new Danmuku(art, option);\n        return {\n            name: 'artplayerPluginDanmuku',\n            emit: danmuku.emit.bind(danmuku),\n            config: danmuku.config.bind(danmuku),\n            hide: danmuku.hide.bind(danmuku),\n            show: danmuku.show.bind(danmuku),\n            get isHide() {\n                return danmuku.isHide;\n            },\n        };\n    };\n}\n"],"names":["filter","queue","state","callback","danmu","$state","map","getRect","ref","key","result","getBoundingClientRect","getDanmuRef","find","$ref","document","createElement","style","cssText","arrayLikeToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","getMode","bilibiliDanmuParseFromXml","xmlString","srtList","match","length","item","attrStr","text","attr","split","trim","time","Number","mode","fontSize","color","toString","timestamp","pool","userID","rowID","bilibiliDanmuParseFromUrl","url","fetch","then","res","calculatedTop","danmus","top","topMap","index","push","topMapKeys","Object","keys","maxDiff","prev","prevTop","height","diff","maxRight","minRight","width","topKey","danmuArr","right","sort","next","getDanmuTop","ins","option","margin","marginTop","marginBottom","playerData","art","template","$player","parseFloat","danmuData","left","unshift","Danmuku","i18n","update","config","isStop","isHide","animationFrameTimer","$danmuku","on","start","bind","stop","resize","load","danmuku","innerText","forEach","emit","constructor","clamp","utils","validator","assign","scheme","speed","maxlength","opacity","$lastStartTime","Date","now","transform","$restWidth","transition","$restTime","playerLeft","playerWidth","danmuLeft","translateX","border","marginLeft","window","requestAnimationFrame","playing","currentTime","appendChild","synchronousPlayback","playbackRate","danmuWidth","danmuTop","suspend","cancelAnimationFrame","continue","display","notice","show","get","Infinity","artplayerPluginDanmuku","name","hide"],"mappings":"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"}